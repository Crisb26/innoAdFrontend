# ğŸ¤– CI/CD - AutomatizaciÃ³n de Despliegue\n\n**Fecha**: 13 de diciembre de 2025\n\n---\n\n## ğŸ¯ LA PREGUNTA\n\n> \"Â¿El cÃ³digo se puede programar para que automÃ¡ticamente se suban los cambios?\"\n> \"Â¿Siempre toca crear imagen o en que va eso?\"\n\n**Respuesta**: âœ… **SÃ, se puede automatizar TODO**\n\n---\n\n## ğŸ”„ FLUJO ACTUAL vs FLUJO AUTOMATIZADO\n\n### âŒ FLUJO MANUAL (Lo que hemos estado haciendo)\n\n```\n1. Escribo cÃ³digo en mi editor\n   â†“\n2. $ git commit -m \"Cambios\"\n   â†“\n3. $ git push origin main\n   â†“\n4. Espero y voy a GitHub\n   â†“\n5. $ docker build -t usuario/app:v2.0.5 .\n   â†“\n6. Espero 10-15 minutos\n   â†“\n7. $ docker push usuario/app:v2.0.5\n   â†“\n8. Voy a Azure y actualizo URL de imagen\n   â†“\n9. â³ Espero a que se reinicie\n   â†“\nâœ… FINALMENTE: App actualizada en producciÃ³n\n\nTIEMPO TOTAL: 30-45 minutos\n```\n\n### âœ… FLUJO AUTOMATIZADO (CI/CD)\n\n```\n1. Escribo cÃ³digo en mi editor\n   â†“\n2. $ git commit -m \"Cambios\"\n   â†“\n3. $ git push origin main\n   â†“\n   ğŸ¤– AQUÃ COMIENZA LA MAGIA...\n   âœ… GitHub Actions detecta el push\n   âœ… Compila automÃ¡ticamente\n   âœ… Ejecuta tests\n   âœ… Crea imagen Docker\n   âœ… Sube a Docker Hub\n   âœ… Notifica a Azure\n   âœ… Azure redeploy automÃ¡tico\n   â†“\nâœ… APP ACTUALIZADA EN PRODUCCIÃ“N\n\nTIEMPO TOTAL: 5-10 minutos (automÃ¡tico, sin hacer nada)\n```\n\n---\n\n## ğŸ“Š COMPARACIÃ“N\n\n| Aspecto | Manual | Automatizado |\n|---------|--------|---------------|\n| **Tiempo** | 30-45 min | 5-10 min |\n| **Esfuerzo** | Escribir 7 comandos | Escribir 1 comando |\n| **Errores** | Posibles | MÃ­nimos |\n| **Disponibilidad** | Cuando yo quiera | 24/7 |\n| **Testing** | Opcional | AutomÃ¡tico |\n| **Logs** | Manuales | AutomÃ¡ticos |\n\n---\n\n## ğŸ› ï¸ CÃ“MO FUNCIONA CI/CD\n\n### Herramientas principales\n\n```\nGitHub (donde estÃ¡ tu cÃ³digo)\n         â†“\n      GitHub Actions (CI/CD - GRATUITO)\n         â†“\n    Docker Hub (registro de imÃ¡genes)\n         â†“\n    Azure Container Apps (producciÃ³n)\n```\n\n### Flujo tÃ©cnico\n\n```\nMi PC\n  â”œâ”€ git push\n  â”‚   â†“\n  â””â”€â†’ GitHub (repositorio)\n        â”œâ”€ Detecta cambios en \"main\"\n        â”œâ”€ Dispara workflow\n        â”‚   â†“\n        â””â”€â†’ GitHub Actions\n              â”œâ”€ Checkout cÃ³digo\n              â”œâ”€ Compilar (mvn compile)\n              â”œâ”€ Tests (mvn test)\n              â”œâ”€ Docker build\n              â”œâ”€ Docker push\n              â””â”€ Webhook a Azure\n                 â†“\n              Azure Container Apps\n              â”œâ”€ Detecta nueva imagen\n              â”œâ”€ Pull imagen desde Docker Hub\n              â”œâ”€ Reinicia contenedor\n              â””â”€ âœ… App actualizada\n```\n\n---\n\n## ğŸ“‹ OPCIONES DISPONIBLES\n\n### OPCIÃ“N 1: GitHub Actions (RECOMENDADO - Gratuito)\n\n**Ventajas:**\n- âœ… Gratuito (con limitaciones)\n- âœ… Integrado en GitHub\n- âœ… FÃ¡cil de configurar\n- âœ… Perfecto para pequeÃ±os proyectos\n\n**Desventajas:**\n- âŒ LÃ­mite de 2000 minutos/mes (plan gratuito)\n- âŒ Contenedores Linux solo\n\n**Caso de uso:**\n```\nPerfecto para: Proyecto InnoAd (pequeÃ±o-medio)\nEsperado: ~50 builds/mes Ã— 5 min = 250 min (dentro del lÃ­mite)\n```\n\n### OPCIÃ“N 2: GitLab CI (Alternativa)\n\n**Ventajas:**\n- âœ… Gratuito y generoso\n- âœ… 10,000 minutos/mes (plan gratuito)\n- âœ… Integrado en GitLab\n\n**Desventajas:**\n- âŒ Requiere cambiar a GitLab\n- âŒ Menos popular que GitHub\n\n### OPCIÃ“N 3: Jenkins (Enterprise)\n\n**Ventajas:**\n- âœ… Control total\n- âœ… Sin lÃ­mites\n- âœ… Muy flexible\n\n**Desventajas:**\n- âŒ Requiere servidor propio\n- âŒ Complejo de configurar\n- âŒ Costo de infraestructura\n\n---\n\n## ğŸš€ SETUP: GitHub Actions (Tu Caso)\n\n### PASO 1: Crear archivo de workflow\n\n**UbicaciÃ³n**: `.github/workflows/deploy.yml`\n\n```yaml\nname: Build and Deploy\n\non:\n  push:\n    branches:\n      - main\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n    \n    steps:\n      - uses: actions/checkout@v2\n      \n      # Compilar backend\n      - name: Set up JDK 21\n        uses: actions/setup-java@v2\n        with:\n          java-version: '21'\n      \n      - name: Build Backend\n        run: |\n          cd BACKEND/innoadBackend\n          mvn clean package -DskipTests\n      \n      # Compilar frontend\n      - name: Set up Node.js\n        uses: actions/setup-node@v2\n        with:\n          node-version: '20'\n      \n      - name: Build Frontend\n        run: |\n          cd FRONTEND/innoadFrontend\n          npm ci\n          npm run build\n      \n      # Login a Docker Hub\n      - name: Login to Docker Hub\n        uses: docker/login-action@v1\n        with:\n          username: ${{ secrets.DOCKER_USERNAME }}\n          password: ${{ secrets.DOCKER_PASSWORD }}\n      \n      # Build y push backend\n      - name: Build and push Backend\n        uses: docker/build-push-action@v2\n        with:\n          context: ./BACKEND/innoadBackend\n          push: true\n          tags: ${{ secrets.DOCKER_USERNAME }}/innoad-backend:latest\n      \n      # Build y push frontend\n      - name: Build and push Frontend\n        uses: docker/build-push-action@v2\n        with:\n          context: ./FRONTEND/innoadFrontend\n          push: true\n          tags: ${{ secrets.DOCKER_USERNAME }}/innoad-frontend:latest\n      \n      # Notificar a Azure (redeploy)\n      - name: Deploy to Azure\n        run: |\n          curl -X POST ${{ secrets.AZURE_WEBHOOK_URL }} \\\n            -H \"Content-Type: application/json\"\n```\n\n### PASO 2: Agregar secrets a GitHub\n\n1. Ir a: `https://github.com/TuUsuario/innoAd/settings/secrets/actions`\n2. Click \"New repository secret\"\n3. Agregar:\n   - `DOCKER_USERNAME` â†’ Tu usuario de Docker Hub\n   - `DOCKER_PASSWORD` â†’ Token de Docker Hub\n   - `AZURE_WEBHOOK_URL` â†’ Webhook de Azure (opcional)\n\n### PASO 3: Configurar Azure para redeploy automÃ¡tico\n\n```bash\n# En Azure Container Apps\n# Settings â†’ Registries\n\n# Configurar para auto-update:\n# - Registry: Docker Hub\n# - Username: Tu usuario\n# - Password: Token\n# - Auto-redeploy: âœ… Activado\n```\n\n---\n\n## ğŸ’¡ FLUJO FINAL (CON CI/CD)\n\n```\nDÃA 1: Setup inicial (30 minutos, una sola vez)\nâ”‚\nâ”œâ”€ 1. Crear archivo .github/workflows/deploy.yml\nâ”œâ”€ 2. Agregar secrets en GitHub\nâ”œâ”€ 3. Configurar Azure para auto-redeploy\nâ”‚\nâ””â”€ âœ… Sistema listo\n\n\nDÃA 2 EN ADELANTE: Cambios automÃ¡ticos (5 minutos total)\nâ”‚\nâ”œâ”€ 1. Edito cÃ³digo en mi editor\nâ”‚\nâ”œâ”€ 2. $ git commit -m \"Fix bug\" && git push\nâ”‚     â†“\nâ”‚     GitHub Actions se activa automÃ¡ticamente\nâ”‚     (No hago nada, solo espero)\nâ”‚     â†“\nâ”‚     â€¢ Compila backend\nâ”‚     â€¢ Compila frontend\nâ”‚     â€¢ Crea imagen Docker\nâ”‚     â€¢ Sube a Docker Hub\nâ”‚     â€¢ Azure redeploy\nâ”‚     â†“\nâ”‚     âœ… App actualizada en producciÃ³n\nâ”‚\nâ””â”€ âœ… Listo, cambio ya en vivo\n```\n\n---\n\n## âš™ï¸ VERSIONES AUTOMÃTICAS\n\n### Problema: Todas las imÃ¡genes se llaman \"latest\"\n```\ndocker push usuario/innoad-backend:latest\nâ†“\nPrÃ³xima vez sobrescribe la anterior\nâ†“\nâŒ Sin historial de versiones\n```\n\n### SoluciÃ³n: Automatizar nÃºmeros de versiÃ³n\n\n```yaml\n# En .github/workflows/deploy.yml\n\n- name: Get version\n  id: version\n  run: |\n    VERSION=$(date +%Y.%m.%d.%H%M)\n    echo \"::set-output name=version::$VERSION\"\n\n- name: Build and push\n  with:\n    tags: |\n      ${{ secrets.DOCKER_USERNAME }}/innoad-backend:latest\n      ${{ secrets.DOCKER_USERNAME }}/innoad-backend:${{ steps.version.outputs.version }}\n```\n\n**Resultado**:\n```\nimage: usuario/innoad-backend:2025.12.13.1430\nimage: usuario/innoad-backend:2025.12.13.1500\nimage: usuario/innoad-backend:2025.12.13.1530\n...\n```\n\n---\n\n## ğŸ§ª TESTING AUTOMÃTICO\n\n### Agregar tests al workflow\n\n```yaml\n- name: Run Backend Tests\n  run: |\n    cd BACKEND/innoadBackend\n    mvn test\n\n- name: Run Frontend Tests\n  run: |\n    cd FRONTEND/innoadFrontend\n    npm test -- --watch=false\n```\n\n**Si los tests fallan**:\n- âŒ Build se detiene\n- âŒ No se sube imagen\n- âŒ No se deploya\n- ğŸ“§ Te notifica por email\n\n**Si los tests pasan**:\n- âœ… Build continÃºa\n- âœ… Se sube imagen\n- âœ… Se deploya automÃ¡tico\n\n---\n\n## ğŸ“Š COMPARACIÃ“N: Manual vs Automatizado\n\n### Escenario: 10 cambios en una semana\n\n**Manual**:\n```\n10 cambios Ã— 30 min/cambio = 300 minutos (5 horas) DE TU TIEMPO\nTareas repetitivas, cansador, propenso a errores\n```\n\n**Automatizado**:\n```\n10 cambios Ã— 5 min deploy automÃ¡tico = 50 minutos SIN HACER NADA\n+ 30 min setup inicial (una sola vez) = 80 minutos TOTAL\n\nAhorro: 220 minutos (3.6 horas) por semana\n```\n\n---\n\n## ğŸ” SEGURIDAD EN CI/CD\n\n### âœ… Buenas prÃ¡cticas\n\n```yaml\n# âŒ NUNCA hagas esto\nsteps:\n  - run: docker login -u miusuario -p micontraseÃ±a\n\n# âœ… SIEMPRE usa secrets\nsteps:\n  - uses: docker/login-action@v1\n    with:\n      username: ${{ secrets.DOCKER_USERNAME }}\n      password: ${{ secrets.DOCKER_PASSWORD }}\n```\n\n### Variables secretas\n- âœ… Nunca aparecen en logs\n- âœ… Encriptadas en GitHub\n- âœ… Solo accesibles durante ejecuciÃ³n\n- âœ… Se pueden rotar fÃ¡cilmente\n\n---\n\n## ğŸ›‘ CÃ“MO DETENER UN DEPLOY\n\n### Si algo sale mal y necesito rollback\n\n```bash\n# OpciÃ³n 1: Revertir commit\ngit revert <commit-hash>\ngit push\n# â†’ CI/CD automÃ¡ticamente deploya versiÃ³n anterior\n\n# OpciÃ³n 2: Usar imagen anterior en Azure\naz containerapp update --image usuario/innoad-backend:2025.12.13.1400\n# â†’ Sin esperar a GitHub Actions\n```\n\n---\n\n## ğŸ“ˆ MONITOREO\n\n### Verificar status de builds\n\n1. **GitHub**: `https://github.com/TuUsuario/innoAd/actions`\n   - Ver todos los builds\n   - Ver logs\n   - Cancelar si es necesario\n\n2. **Notificaciones**:\n   - Email si falla\n   - Slack (opcional)\n   - Discord (opcional)\n\n3. **Ejemplo con Slack**:\n   ```yaml\n   - name: Notify Slack\n     if: always()\n     uses: slackapi/slack-github-action@v1\n     with:\n       webhook-url: ${{ secrets.SLACK_WEBHOOK }}\n   ```\n\n---\n\n## ğŸ¯ RECOMENDACIÃ“N PARA TU PROYECTO\n\n### PASO 1: Setup inicial (hoy o maÃ±ana - 30 min)\n```bash\n# 1. Crear estructura\nmkdir .github/workflows\ntouch .github/workflows/deploy.yml\n\n# 2. Copiar el archivo YAML de arriba\n\n# 3. Agregar secrets en GitHub Settings\n\n# 4. Push a GitHub\ngit add .\ngit commit -m \"Add CI/CD workflow\"\ngit push\n```\n\n### PASO 2: Probar (15 min)\n```bash\n# Hacer un pequeÃ±o cambio\necho \"# Test\" >> README.md\ngit commit -am \"Test CI/CD\"\ngit push\n\n# Ver en GitHub Actions\nhttps://github.com/TuUsuario/innoAd/actions\n# Esperar a que termine\n# Verificar que Docker Hub tiene nueva imagen\n```\n\n### PASO 3: De ahora en adelante\n```bash\n# Solo haces esto:\ngit push\n\n# Y listo, el rest es automÃ¡tico âœ…\n```\n\n---\n\n## ğŸ†š RESUMEN: QUÃ‰ MÃ‰TODO USAR\n\n| SituaciÃ³n | MÃ©todo | Tiempo |\n|-----------|--------|--------|\n| **Desarrollo local** | Manual (sin Docker) | Inmediato |\n| **Pruebas en servidor** | Docker manual | 45 min |\n| **ProducciÃ³n (1-2 cambios/mes)** | Docker manual | 45 min/cambio |\n| **ProducciÃ³n (5+ cambios/semana)** | **CI/CD (GitHub Actions)** | **5 min/cambio** |\n\n**Para tu proyecto InnoAd**:\n```\nâœ… RECOMENDACIÃ“N: CI/CD (GitHub Actions)\n   Motivo: Facilita desarrollo, testing automÃ¡tico, zero-downtime deploys\n```\n\n---\n\n## ğŸ“ CONCLUSIÃ“N\n\n### SÃ, el cÃ³digo se puede automatizar\n\n```\n1. GitHub Actions (CI) compila automÃ¡ticamente\n2. Docker (CD) crea imagen automÃ¡ticamente\n3. Azure (Deployment) actualiza automÃ¡ticamente\n\nResultado: Cambio en 5 minutos sin tocar nada despuÃ©s del push\n```\n\n### Siempre toca crear imagen? NO\n\n```\nâœ… GitHub Actions la crea automÃ¡ticamente\nâœ… Se sube a Docker Hub automÃ¡ticamente\nâœ… Azure se actualiza automÃ¡ticamente\n\nTu Ãºnico trabajo: git push\n```\n\n### En quÃ© va eso?\n\n```\nSI TIENES: GitHub Actions (CI/CD)\n  â†“\n  AUTOMATIZA:\n    â€¢ CompilaciÃ³n (mvn compile, ng build)\n    â€¢ Testing (mvn test)\n    â€¢ Docker build\n    â€¢ Docker push\n    â€¢ Azure redeploy\n  â†“\n  RESULTADO: Todo en 5-10 minutos automÃ¡tico\n```\n\n---\n\n## ğŸ“ ARCHIVOS A CREAR\n\n```\n.github/\nâ”œâ”€â”€ workflows/\nâ”‚   â””â”€â”€ deploy.yml          â† Copiar YAML de arriba\n```\n\n**Listo**. Con esto tienes CI/CD automÃ¡tico.\n\n---\n\n**Status**: âœ… **ExplicaciÃ³n completa**\n\n**PrÃ³ximo paso**: Cuando quieras implementarlo, avÃ­same y te muestro exactamente quÃ© copiar.\n"