{
  "info": {
    "name": "InnoAd - Chat e IA API",
    "description": "Colección de pruebas para los endpoints de Chat e IA",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8080/api"
    },
    {
      "key": "jwtToken",
      "value": ""
    }
  ],
  "item": [
    {
      "name": "Chat",
      "item": [
        {
          "name": "Crear/Obtener Chat",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"idUsuarioTecnico\": 1,\n  \"idUsuarioSolicitante\": 2\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/chat/crear",
              "host": ["{{baseUrl}}", "chat", "crear"]
            }
          }
        },
        {
          "name": "Enviar Mensaje",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"idChatUsuario\": 1,\n  \"idUsuarioRemitente\": 1,\n  \"contenido\": \"Hola, ¿cómo estás?\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/chat/1/mensaje",
              "host": ["{{baseUrl}}", "chat", "1", "mensaje"]
            }
          }
        },
        {
          "name": "Obtener Mensajes de Chat",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/chat/1/mensajes?page=0&size=20",
              "host": ["{{baseUrl}}", "chat", "1", "mensajes"],
              "query": [
                {
                  "key": "page",
                  "value": "0"
                },
                {
                  "key": "size",
                  "value": "20"
                }
              ]
            }
          }
        },
        {
          "name": "Marcar Mensajes como Leídos",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/chat/1/marcar-leidos",
              "host": ["{{baseUrl}}", "chat", "1", "marcar-leidos"]
            }
          }
        },
        {
          "name": "Cerrar Chat",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/chat/1/cerrar",
              "host": ["{{baseUrl}}", "chat", "1", "cerrar"]
            }
          }
        },
        {
          "name": "Obtener Chats por Usuario",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/chat/usuario/1",
              "host": ["{{baseUrl}}", "chat", "usuario", "1"]
            }
          }
        },
        {
          "name": "Obtener Chats por Técnico",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/chat/tecnico/1",
              "host": ["{{baseUrl}}", "chat", "tecnico", "1"]
            }
          }
        },
        {
          "name": "Crear Solicitud de Chat",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"idUsuario\": 2,\n  \"descripcion\": \"Necesito ayuda con mi cuenta\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/chat/solicitud",
              "host": ["{{baseUrl}}", "chat", "solicitud"]
            }
          }
        },
        {
          "name": "Asignar Solicitud a Técnico",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"idTecnicoAsignado\": 1\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/chat/solicitud/1/asignar",
              "host": ["{{baseUrl}}", "chat", "solicitud", "1", "asignar"]
            }
          }
        },
        {
          "name": "Cambiar Estado de Solicitud",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nuevoEstado\": \"EN_PROGRESO\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/chat/solicitud/1/estado",
              "host": ["{{baseUrl}}", "chat", "solicitud", "1", "estado"]
            }
          }
        },
        {
          "name": "Obtener Solicitudes Pendientes",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/chat/solicitudes/pendientes?page=0&size=20",
              "host": ["{{baseUrl}}", "chat", "solicitudes", "pendientes"],
              "query": [
                {
                  "key": "page",
                  "value": "0"
                },
                {
                  "key": "size",
                  "value": "20"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "IA",
      "item": [
        {
          "name": "Consultar IA",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"idUsuario\": 1,\n  \"pregunta\": \"¿Cómo creo una campaña?\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/ia/consultar",
              "host": ["{{baseUrl}}", "ia", "consultar"]
            }
          }
        },
        {
          "name": "Obtener Historial de IA",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/ia/historial/1?page=0&size=20",
              "host": ["{{baseUrl}}", "ia", "historial", "1"],
              "query": [
                {
                  "key": "page",
                  "value": "0"
                },
                {
                  "key": "size",
                  "value": "20"
                }
              ]
            }
          }
        },
        {
          "name": "Obtener Estadísticas de IA",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/ia/estadisticas/1",
              "host": ["{{baseUrl}}", "ia", "estadisticas", "1"]
            }
          }
        },
        {
          "name": "Obtener Prompts",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/ia/prompts",
              "host": ["{{baseUrl}}", "ia", "prompts"]
            }
          }
        },
        {
          "name": "Crear Prompt",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"rol\": \"ROLE_USUARIO\",\n  \"instruccion\": \"Eres un asistente amigable\",\n  \"tokenMaximo\": 2000,\n  \"temperatura\": 0.7\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/ia/prompts",
              "host": ["{{baseUrl}}", "ia", "prompts"]
            }
          }
        },
        {
          "name": "Actualizar Prompt",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"instruccion\": \"Instrucción actualizada\",\n  \"temperatura\": 0.8\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/ia/prompts/1",
              "host": ["{{baseUrl}}", "ia", "prompts", "1"]
            }
          }
        },
        {
          "name": "Verificar Disponibilidad",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/ia/horario/disponible",
              "host": ["{{baseUrl}}", "ia", "horario", "disponible"]
            }
          }
        }
      ]
    }
  ]
}
