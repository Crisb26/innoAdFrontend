{
  "info": {
    "name": "InnoAd Maintenance Mode - OPCI√ìN A",
    "description": "Testing endpoints for professional maintenance mode with role control",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Mantenimiento",
      "item": [
        {
          "name": "1. Activar Mantenimiento EMERGENCIA",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{TOKEN}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"codigoSeguridad\": \"93022611184\",\n  \"tipoMantenimiento\": \"EMERGENCIA\",\n  \"rolesAfectados\": [\"VISITANTE\", \"USUARIO\"],\n  \"rolesExcluidos\": [],\n  \"mensaje\": \"Sistema en mantenimiento urgente. Los desarrolladores pueden acceder para hotfixes cr√≠ticos.\",\n  \"fechaFinEstimada\": \"2024-01-20T14:30:00\",\n  \"urlContactoSoporte\": \"https://soporte.innoad.com/emergencia\"\n}"
            },
            "url": {
              "raw": "http://localhost:8080/api/admin/mantenimiento/activar",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "8080",
              "path": [
                "api",
                "admin",
                "mantenimiento",
                "activar"
              ]
            },
            "description": "Activa mantenimiento de tipo EMERGENCIA (rojo) para VISITANTE y USUARIO"
          },
          "response": []
        },
        {
          "name": "2. Activar Mantenimiento PROGRAMADO",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{TOKEN}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"codigoSeguridad\": \"93022611184\",\n  \"tipoMantenimiento\": \"PROGRAMADO\",\n  \"rolesAfectados\": [\"VISITANTE\"],\n  \"rolesExcluidos\": [],\n  \"mensaje\": \"Realizamos mantenimiento programado. El sistema estar√° disponible en breve.\",\n  \"fechaFinEstimada\": \"2024-01-20T16:00:00\",\n  \"urlContactoSoporte\": \"https://soporte.innoad.com\"\n}"
            },
            "url": {
              "raw": "http://localhost:8080/api/admin/mantenimiento/activar",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "8080",
              "path": [
                "api",
                "admin",
                "mantenimiento",
                "activar"
              ]
            },
            "description": "Activa mantenimiento de tipo PROGRAMADO (azul) solo para VISITANTE"
          },
          "response": []
        },
        {
          "name": "3. Activar Mantenimiento CRITICA",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{TOKEN}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"codigoSeguridad\": \"93022611184\",\n  \"tipoMantenimiento\": \"CRITICA\",\n  \"rolesAfectados\": [\"VISITANTE\", \"USUARIO\", \"TECNICO\"],\n  \"rolesExcluidos\": [],\n  \"mensaje\": \"Sistema en mantenimiento por problema cr√≠tico. Equipo t√©cnico est√° trabajando en la soluci√≥n.\",\n  \"fechaFinEstimada\": \"2024-01-20T17:00:00\",\n  \"urlContactoSoporte\": \"https://soporte.innoad.com/critica\"\n}"
            },
            "url": {
              "raw": "http://localhost:8080/api/admin/mantenimiento/activar",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "8080",
              "path": [
                "api",
                "admin",
                "mantenimiento",
                "activar"
              ]
            },
            "description": "Activa mantenimiento de tipo CRITICA (naranja) para VISITANTE, USUARIO y TECNICO"
          },
          "response": []
        },
        {
          "name": "4. Obtener Estado del Mantenimiento",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{TOKEN}}"
              }
            ],
            "url": {
              "raw": "http://localhost:8080/api/admin/mantenimiento/estado",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "8080",
              "path": [
                "api",
                "admin",
                "mantenimiento",
                "estado"
              ]
            },
            "description": "Obtiene la configuraci√≥n actual del mantenimiento incluyendo tipo, roles y fechas"
          },
          "response": []
        },
        {
          "name": "5. Desactivar Mantenimiento",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{TOKEN}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"codigoSeguridad\": \"93022611184\"\n}"
            },
            "url": {
              "raw": "http://localhost:8080/api/admin/mantenimiento/desactivar",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "8080",
              "path": [
                "api",
                "admin",
                "mantenimiento",
                "desactivar"
              ]
            },
            "description": "Desactiva el modo mantenimiento y los usuarios vuelven al dashboard normal"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Testing Scenarios",
      "item": [
        {
          "name": "Escenario 1: Test EMERGENCIA completo",
          "item": [
            {
              "name": "1.1 Activar EMERGENCIA (VISITANTE, USUARIO)",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"codigoSeguridad\": \"93022611184\",\n  \"tipoMantenimiento\": \"EMERGENCIA\",\n  \"rolesAfectados\": [\"VISITANTE\", \"USUARIO\"],\n  \"rolesExcluidos\": [],\n  \"mensaje\": \"üö® Sistema en mantenimiento URGENTE. Equipo t√©cnico trabajando en hotfix cr√≠tico.\",\n  \"fechaFinEstimada\": \"2024-01-20T15:30:00\",\n  \"urlContactoSoporte\": \"https://soporte.innoad.com/emergencia\"\n}"
                },
                "url": {
                  "raw": "http://localhost:8080/api/admin/mantenimiento/activar",
                  "protocol": "http",
                  "host": [
                    "localhost"
                  ],
                  "port": "8080",
                  "path": [
                    "api",
                    "admin",
                    "mantenimiento",
                    "activar"
                  ]
                }
              }
            },
            {
              "name": "1.2 Verificar estado (debe mostrar EMERGENCIA en rojo)",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "http://localhost:8080/api/admin/mantenimiento/estado",
                  "protocol": "http",
                  "host": [
                    "localhost"
                  ],
                  "port": "8080",
                  "path": [
                    "api",
                    "admin",
                    "mantenimiento",
                    "estado"
                  ]
                }
              }
            },
            {
              "name": "1.3 Desactivar mantenimiento",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"codigoSeguridad\": \"93022611184\"\n}"
                },
                "url": {
                  "raw": "http://localhost:8080/api/admin/mantenimiento/desactivar",
                  "protocol": "http",
                  "host": [
                    "localhost"
                  ],
                  "port": "8080",
                  "path": [
                    "api",
                    "admin",
                    "mantenimiento",
                    "desactivar"
                  ]
                }
              }
            }
          ]
        },
        {
          "name": "Escenario 2: Test PROGRAMADO (solo VISITANTE)",
          "item": [
            {
              "name": "2.1 Activar PROGRAMADO (solo VISITANTE)",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"codigoSeguridad\": \"93022611184\",\n  \"tipoMantenimiento\": \"PROGRAMADO\",\n  \"rolesAfectados\": [\"VISITANTE\"],\n  \"rolesExcluidos\": [],\n  \"mensaje\": \"üìÖ Realizando mantenimiento programado. Sistema estar√° disponible en breve.\",\n  \"fechaFinEstimada\": \"2024-01-21T10:00:00\",\n  \"urlContactoSoporte\": \"https://soporte.innoad.com\"\n}"
                },
                "url": {
                  "raw": "http://localhost:8080/api/admin/mantenimiento/activar",
                  "protocol": "http",
                  "host": [
                    "localhost"
                  ],
                  "port": "8080",
                  "path": [
                    "api",
                    "admin",
                    "mantenimiento",
                    "activar"
                  ]
                }
              }
            },
            {
              "name": "2.2 Verificar (USUARIO debe poder acceder normalmente)",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "http://localhost:8080/api/admin/mantenimiento/estado",
                  "protocol": "http",
                  "host": [
                    "localhost"
                  ],
                  "port": "8080",
                  "path": [
                    "api",
                    "admin",
                    "mantenimiento",
                    "estado"
                  ]
                }
              }
            }
          ]
        },
        {
          "name": "Escenario 3: Test CRITICA (todos excepto ADMIN/DEV)",
          "item": [
            {
              "name": "3.1 Activar CRITICA",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"codigoSeguridad\": \"93022611184\",\n  \"tipoMantenimiento\": \"CRITICA\",\n  \"rolesAfectados\": [\"VISITANTE\", \"USUARIO\", \"TECNICO\"],\n  \"rolesExcluidos\": [],\n  \"mensaje\": \"‚ö†Ô∏è Sistema en mantenimiento CR√çTICO. Equipo t√©cnico resolviendo problema grave.\",\n  \"fechaFinEstimada\": \"2024-01-20T18:00:00\",\n  \"urlContactoSoporte\": \"https://soporte.innoad.com/critica\"\n}"
                },
                "url": {
                  "raw": "http://localhost:8080/api/admin/mantenimiento/activar",
                  "protocol": "http",
                  "host": [
                    "localhost"
                  ],
                  "port": "8080",
                  "path": [
                    "api",
                    "admin",
                    "mantenimiento",
                    "activar"
                  ]
                }
              }
            }
          ]
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "TOKEN",
      "value": "YOUR_JWT_TOKEN_HERE"
    }
  ]
}
