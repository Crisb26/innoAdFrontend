<div class=\"contenedor-analytics\">\n  <!-- Encabezado -->\n  <div class=\"encabezado-analytics\">\n    <h1>üìä Dashboard de Analytics</h1>\n    <p class=\"subtitulo\">Estad√≠sticas en tiempo real del sistema</p>\n  </div>\n\n  <!-- Selector de Per√≠odo -->\n  <div class=\"selector-periodo\">\n    <button \n      class=\"btn-periodo\"\n      [class.activo]=\"periodoSeleccionado === 'ultima-hora'\"\n      (click)=\"cambiarPeriodo('ultima-hora')\"\n      [disabled]=\"cargando\"\n    >\n      üìç √öltima Hora\n    </button>\n    <button \n      class=\"btn-periodo\"\n      [class.activo]=\"periodoSeleccionado === 'hoy'\"\n      (click)=\"cambiarPeriodo('hoy')\"\n      [disabled]=\"cargando\"\n    >\n      üìÖ Hoy\n    </button>\n    <button \n      class=\"btn-periodo\"\n      [class.activo]=\"periodoSeleccionado === 'semanal'\"\n      (click)=\"cambiarPeriodo('semanal')\"\n      [disabled]=\"cargando\"\n    >\n      üìà Esta Semana\n    </button>\n  </div>\n\n  <!-- Indicador de Carga -->\n  <div class=\"indicador-carga\" *ngIf=\"cargando\">\n    <div class=\"spinner\"></div>\n    <p>Cargando datos...</p>\n  </div>\n\n  <!-- Alerta de Error -->\n  <div class=\"alerta-error\" *ngIf=\"error && !cargando\">\n    <span>‚ùå {{ error }}</span>\n    <button (click)=\"cargarEstadisticas()\">Reintentar</button>\n  </div>\n\n  <!-- Contenido Principal -->\n  <div class=\"contenido-analytics\" *ngIf=\"estadisticas && !cargando\">\n    \n    <!-- Secci√≥n Chat -->\n    <div class=\"seccion\">\n      <h2 class=\"titulo-seccion\">üí¨ Chat en Tiempo Real</h2>\n      <div class=\"grid-cards\">\n        <div class=\"card\">\n          <div class=\"etiqueta\">Mensajes Hoy</div>\n          <div class=\"valor\">{{ estadisticas.totalMensajesChat }}</div>\n          <div class=\"barra-progreso\">\n            <div class=\"barra\" [style.width.%]=\"Math.min(100, (estadisticas.totalMensajesChat / 1000) * 100)\"></div>\n          </div>\n        </div>\n\n        <div class=\"card\">\n          <div class=\"etiqueta\">Usuarios Activos</div>\n          <div class=\"valor\">{{ estadisticas.totalUsuariosActivos }}</div>\n          <div class=\"indicador-activo\">üü¢ En l√≠nea</div>\n        </div>\n\n        <div class=\"card\">\n          <div class=\"etiqueta\">Tiempo Promedio</div>\n          <div class=\"valor\">{{ formatearTiempo(estadisticas.tiempoPromedioRespuestaChat) }}</div>\n          <div class=\"descripcion\">Respuesta promedio</div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Secci√≥n IA -->\n    <div class=\"seccion\">\n      <h2 class=\"titulo-seccion\">ü§ñ Asistente IA</h2>\n      <div class=\"grid-cards\">\n        <div class=\"card\">\n          <div class=\"etiqueta\">Total Preguntas</div>\n          <div class=\"valor\">{{ estadisticas.totalPreguntasIA }}</div>\n          <div class=\"barra-progreso\">\n            <div class=\"barra\" [style.width.%]=\"Math.min(100, (estadisticas.totalPreguntasIA / 500) * 100)\"></div>\n          </div>\n        </div>\n\n        <div class=\"card\">\n          <div class=\"etiqueta\">Tasa de √âxito</div>\n          <div class=\"valor\" [style.color]=\"obtenerColorPorcentaje(estadisticas.tasaExitoIA)\">\n            {{ estadisticas.tasaExitoIA.toFixed(1) }}%\n          </div>\n          <div class=\"descripcion\">{{ estadisticas.totalRespuestasExitosas }} exitosas</div>\n        </div>\n\n        <div class=\"card\">\n          <div class=\"etiqueta\">Respuesta Promedio</div>\n          <div class=\"valor\">{{ formatearTiempo(estadisticas.tiempoPromedioPreguntaIA) }}</div>\n          <div class=\"descripcion\">Tiempo de IA</div>\n        </div>\n\n        <div class=\"card card-especial\">\n          <div class=\"etiqueta\">Costo Hoy</div>\n          <div class=\"valor\">{{ formatearDinero(estadisticas.costoHoyIA) }}</div>\n          <div class=\"descripcion\">{{ estadisticas.tokensUsadosHoy }} tokens</div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Secci√≥n Sistema -->\n    <div class=\"seccion\">\n      <h2 class=\"titulo-seccion\">‚öôÔ∏è Sistema</h2>\n      <div class=\"grid-cards\">\n        <div class=\"card\">\n          <div class=\"etiqueta\">Disponibilidad</div>\n          <div class=\"valor\" [style.color]=\"obtenerColorPorcentaje(estadisticas.tasaDisponibilidadSistema)\">\n            {{ estadisticas.tasaDisponibilidadSistema }}%\n          </div>\n          <div class=\"indicador-arriba\">‚úÖ Operativo</div>\n        </div>\n\n        <div class=\"card\">\n          <div class=\"etiqueta\">Solicitudes</div>\n          <div class=\"valor\">{{ estadisticas.totalSolicitudesProcessadas }}</div>\n          <div class=\"descripcion\">Procesadas hoy</div>\n        </div>\n\n        <div class=\"card card-error\">\n          <div class=\"etiqueta\">Errores</div>\n          <div class=\"valor\">{{ estadisticas.totalErrores }}</div>\n          <div class=\"porcentaje-error\">\n            {{ ((estadisticas.totalErrores / Math.max(1, estadisticas.totalSolicitudesProcessadas)) * 100).toFixed(2) }}%\n          </div>\n        </div>\n\n        <div class=\"card\">\n          <div class=\"etiqueta\">Tiempo Respuesta</div>\n          <div class=\"valor\">{{ formatearTiempo(estadisticas.tiempoPromedioRespuestaSistema) }}</div>\n          <div class=\"descripcion\">Promedio del sistema</div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Footer con metadata -->\n    <div class=\"footer-analytics\">\n      <p>√öltima actualizaci√≥n: {{ estadisticas.ultimaActualizacion | date:'HH:mm:ss' }}</p>\n      <p>Per√≠odo: {{ estadisticas.periodo }}</p>\n    </div>\n  </div>\n</div>\n